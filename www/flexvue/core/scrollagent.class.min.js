"use strict";export default class ScrollAgent{constructor(e){this.TAG="ScrollAgent",this.version="1.1",this.channel=e,this.scrollerVertical=null,this.scrollerHorizontal=null,this.keys={37:1,38:1,39:1,40:1},this.supportsPassive=!1,this.wheelOpt=!1,this.wheelEvent="mousewheel",this.floatEl=null,this.floatElScrollPos=500}addFloatListener(e,t,l){const s=this;this.floatEl=document.querySelector(e),this.floatEl&&(Log.d(`${this.TAG} :: addFloatListener ----->`,"elId : "+e,"pos : "+t,"<---------//"),s.floatElScrollPos=t||500,Handler.post(function(){s.floatEl.classList.contains("hidden")||s.floatEl.classList.add("hidden")},1),"function"==typeof l&&l(this.floatEl))}addScrollListener(e,t){Log.d(`${this.TAG} :: addScrollListener ----->`,"mode : "+e,"channel : "+this.channel,"scrollTarget : "+t,"<---------//"),"vertical"==e?(this.scrollerVertical=document.querySelector(t),this.scrollerVertical.dataset.scrollch=this.channel,this.startVertical()):"horizontal"==e&&(this.scrollerHorizontal=document.querySelector(t),this.scrollerHorizontal.dataset.scrollch=this.channel,this.startHorizontal())}startVertical(){const e=this;if(this.scrollerVertical){this.scrollerVertical.addEventListener("scroll",function(t){const l=t.target.dataset.scrollch;let s=this.scrollTop;l==e.channel&&ScrollObserver._setPos(e.channel,s),e.floatEl&&(s<e.floatElScrollPos?e.floatEl.classList.contains("hidden")||e.floatEl.classList.add("hidden"):e.floatEl.classList.contains("hidden")&&e.floatEl.classList.remove("hidden"))});try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){e.supportsPassive=!0}}))}catch(e){}e.wheelOpt=!!e.supportsPassive&&{passive:!1},e.wheelEvent="onwheel"in document.createElement("div")?"wheel":"mousewheel"}}startHorizontal(){Log.d(`${this.TAG} :: startHorizontal ----->`);const e=this;e.scrollerHorizontal&&e.scrollerHorizontal.addEventListener("scroll",function(t){const l=t.target.dataset.scrollch;l==e.channel&&ScrollObserver._setPos(e.channel,this.scrollLeft)})}getPos(){let e=0;try{e=ScrollObserver._getPos(this.channel),Log.d(`${this.TAG} :: getPos ----->`,"pos : "+e,"<---------//")}catch(e){Log.d(e)}return e}getPosById(e){let t=0;const l=document.querySelector(`#${e}`);return l&&(t=l.offsetTop),t}resetPos(){Log.d(`${this.TAG} :: resetChannelTopPos ----->`,"channel : "+this.channel+", position : 0","<---------//"),ScrollObserver._setPos(this.channel,0)}scrollTo(e,t=null){Log.d(`${this.TAG} :: scrollTo`);const l=this,s=t||0;Handler.post(function(){l.scrollerVertical&&l.scrollerVertical.scrollTo(e)},s)}scrollToLeft(e,t=null){Log.d(`${this.TAG} :: scrollLeft`);const l=this,s=t||0;Handler.post(function(){l.scrollerHorizontal&&l.scrollerHorizontal.scrollTo(e)},s)}scrollToBottom(e=null){const t=this,l=e||0;t.scrollerVertical&&Handler.post(function(){const e=t.scrollerVertical.scrollHeight;t.scrollerVertical.scrollTo({top:e})},l)}preventDefault(e){try{e.stopImmediatePropagation(),e.preventDefault()}catch(e){}}preventDefaultForScrollKeys(e){if(this.keys[e.keyCode])return this.preventDefault(e),!1}disableScroll(){Log.d(`${this.TAG} :: disableScroll`),this.scrollerVertical&&(this.scrollerVertical.addEventListener("DOMMouseScroll",this.preventDefault,!1),this.scrollerVertical.addEventListener(this.wheelEvent,this.preventDefault,this.wheelOpt),this.scrollerVertical.addEventListener("touchmove",this.preventDefault,!1),this.scrollerVertical.addEventListener("keydown",this.preventDefaultForScrollKeys,!1))}enableScroll(){Log.d(`${this.TAG} :: enableScroll`),this.scrollerVertical&&(this.scrollerVertical.removeEventListener("DOMMouseScroll",this.preventDefault,!1),this.scrollerVertical.removeEventListener(this.wheelEvent,this.preventDefault,this.wheelOpt),this.scrollerVertical.removeEventListener("touchmove",this.preventDefault),this.scrollerVertical.removeEventListener("keydown",this.preventDefaultForScrollKeys,!1))}}