"use strict";export default class AsyncTask{async doGet(e,t,o={}){let n=e.length,r=e.lastIndexOf(".");e.substring(r,n).toLowerCase();if(/^file:\/\/\//.test(location.href))return new Promise((t,o)=>{this.importPluginjQeury(function(){$.getJSON(e,{format:"json"}).done(function(e){t(e)}).fail(function(e,t,o){var n=t+", "+o;throw new Error(n)})})});{let n=e;if(Object.keys(t).length>0){let e=Object.entries(t).map(([e,t])=>`${e}=${encodeURIComponent(t)}`).join("&");n=`${n}?${e}`}Log.d("doGet --> "+n);let r=o||{"Content-Type":"application/json"},s={method:"GET",mode:"cors",cache:config.cache,headers:r};const a=await fetch(n,s);if(a.ok)return await a.json();throw new Error(a.status)}}async doPost(e,t,o={}){let n=e,r=o||{"Content-Type":"application/json"},s={method:void 0!==t.id&&null!==t.id?"PUT":"POST",mode:"cors",cache:"no-cache",headers:r,body:JSON.stringify(t)};Log.d(n);const a=await fetch(n,s);if(a.ok)return await a.json();throw new Error(a.status)}importPluginjQeury(e){if(null===document.querySelector('[src="flexvue/plugins/jquery/jquery.js"]')){var t=document.getElementsByTagName("head")[0],o=document.createElement("script");o.src="flexvue/plugins/jquery/jquery.js",t.appendChild(o),o.onload=function(){e()}}else e()}async doImport(e){return Log.d("doImport : "+e),await import(e).then(e=>e)}async doImportCss(e){if(Log.d("doImportCss : "+e),null===document.querySelector(`[href="${e}"]`))return Log.d("run link import css"),await document.getElementsByTagName("head")[0].insertAdjacentHTML("beforeend",`<link rel="stylesheet" href="${e}" />`)}}