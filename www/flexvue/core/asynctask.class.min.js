"use strict";export default class AsyncTask{async doGet(e,o,t={}){let n=e.length,r=e.lastIndexOf("."),s=e.substring(r,n).toLowerCase();if(!config.is_hybridapp||".json"!=s||"Android"!=App.os&&"iPhone"!=App.os){let n=e;if(Object.keys(o).length>0){let e=Object.entries(o).map(([e,o])=>`${e}=${encodeURIComponent(o)}`).join("&");n=`${n}?${e}`}Log.d("doGet --> "+n);let r=t||{"Content-Type":"application/json",Accept:"application/json"},s={method:"GET",mode:"cors",cache:config.cache,headers:r};const i=await fetch(n,s);if(i.ok)return await i.json();throw new Error(i.status)}if("undefined"==typeof jQuery)throw new Error("You need load jQuery Plugins, add plugin : import {} from ../flexvue/plugins/jquery/jquery.js");return new Promise((o,t)=>{$.getJSON(e,{format:"json"}).done(function(e){o(e)}).fail(function(e,o,t){var n=o+", "+t;throw new Error(n)})})}async doPost(e,o,t={}){let n=e,r=t||{"Content-Type":"application/json",Accept:"application/json"},s={method:void 0!==o.id&&null!==o.id?"PUT":"POST",mode:"cors",cache:"no-cache",headers:r,body:JSON.stringify(o)};Log.d(n);const i=await fetch(n,s);if(i.ok)return await i.json();throw new Error(i.status)}async doImport(e){return Log.d("doImport : "+e),await import(e).then(e=>e)}async doImportCss(e){if(Log.d("doImportCss : "+e),null===document.querySelector(`[href="${e}"]`))return Log.d("run link import css"),await document.getElementsByTagName("head")[0].insertAdjacentHTML("beforeend",`<link rel="stylesheet" href="${e}" />`)}}