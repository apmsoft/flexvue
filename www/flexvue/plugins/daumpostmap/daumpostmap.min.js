"use strict";import UrlManager from"../../core/urlmanager.class.min.js";import Template from"../../plugins/daumpostmap/daumpostmap.tpl.js";class DaumPostMap{constructor(e,t,a){this.target_id=e,this.map_x=t||127.489093909065,this.map_y=a||36.6423200323081,this.map=null,this.doPrintMap({})}doPrintMap(e){let t=this;void 0!==e.lat&&(t.map_y=e.lat),void 0!==e.lon&&(t.map_x=e.lon);var a=document.getElementById("map"),o={center:new daum.maps.LatLng(t.map_y,t.map_x),level:2};t.map=new daum.maps.Map(a,o);var n=new daum.maps.LatLng(t.map_y,t.map_x),m=new daum.maps.Marker({position:n});m.setMap(t.map)}doPostCodeAddress(e,t,a){let o=this;document.querySelector(this.target_id).addEventListener("click",function(){Activity.onStart("#bottomthird");const n=new UrlManager(document.location);n.pushState("postcode","postcode",`${n.pathname}?${n.makeJSON2URL({mode:"postcode"})}`),(new Template).render({}).then(e=>{const t=document.querySelector("#bottomthird");return t.innerHTML=e,!0}).then(()=>{var n=document.getElementById("bottomthird_daumpostmap");daum.postcode.load(function(){new daum.Postcode({oncomplete:function(n){Log.d(n);let m="",d="";"R"===n.userSelectedType&&(""!==n.bname&&(d+=n.bname),""!=n.buildingName&&(d+=""!=d?`, ${n.buildingName}`:n.buildingName),m+=""!==d?` (${d})`:"");let r="";document.querySelector("#post_area")&&(r=n.sido,document.querySelector("#post_area").value=r),document.querySelector(e).value=n.zonecode,document.querySelector(t).value=`${n.roadAddress} ${m}`,null!==a&&""!=a&&(void 0!==n.jibunAddress?document.querySelector(a).value=`${n.jibunAddress} ${m}`:document.querySelector(a).value=`${n.sido} ${n.sigungu} ${n.query} ${m}`),geocoder.addressSearch(n.jibunAddress+" "+m,function(e,t){if(Log.d(e),t===daum.maps.services.Status.OK){document.querySelector("#lat").value=e[0].y,document.querySelector("#lon").value=e[0].x;var a=new daum.maps.LatLngBounds;new daum.maps.Marker({map:o.map,position:new daum.maps.LatLng(e[0].y,e[0].x)});a.extend(new daum.maps.LatLng(e[0].y,e[0].x)),o.map.setBounds(a)}}),Activity.onStop("#bottomthird")},width:"100%",height:"500px",maxSuggestItems:5}).embed(n)})})})}}export{DaumPostMap};