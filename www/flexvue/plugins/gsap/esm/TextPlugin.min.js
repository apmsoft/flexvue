import{emojiSafeSplit,getText,splitInnerHTML}from"./utils/strings.min.js";var gsap,_tempDiv,_getGSAP=function(){return gsap||"undefined"!=typeof window&&(gsap=window.gsap)&&gsap.registerPlugin&&gsap};export var TextPlugin={version:"3.8.0",name:"text",init:function(e,i,t){var n,s,l,a,r,p,o,g,f=e.nodeName.toUpperCase(),m=this;if(m.svg=e.getBBox&&("TEXT"===f||"TSPAN"===f),!("innerHTML"in e||m.svg))return!1;if(m.target=e,"object"!=typeof i&&(i={value:i}),"value"in i){for(m.delimiter=i.delimiter||"",l=splitInnerHTML(e,m.delimiter,!1,i.preserveSpaces),_tempDiv||(_tempDiv=document.createElement("div")),_tempDiv.innerHTML=i.value,s=splitInnerHTML(_tempDiv,m.delimiter),m.from=t._from,m.from&&(f=l,l=s,s=f),m.hasClass=!(!i.newClass&&!i.oldClass),m.newClass=i.newClass,m.oldClass=i.oldClass,f=l.length-s.length,n=f<0?l:s,m.fillChar=i.fillChar||(i.padSpace?"&nbsp;":""),f<0&&(f=-f);--f>-1;)n.push(m.fillChar);if("diff"===i.type){for(a=0,r=[],p=[],o="",f=0;f<s.length;f++)g=s[f],g===l[f]?o+=g:(r[a]=o+g,p[a++]=o+l[f],o="");s=r,l=p,o&&(s.push(o),l.push(o))}i.speed&&t.duration(Math.min(.05/i.speed*n.length,i.maxDuration||9999)),this.original=l,this.text=s,this._props.push("text")}else m.text=m.original=[""]},render:function(e,i){e>1?e=1:e<0&&(e=0),i.from&&(e=1-e);var t,n,s,l=i.text,a=i.hasClass,r=i.newClass,p=i.oldClass,o=i.delimiter,g=i.target,f=i.fillChar,m=i.original,u=l.length,d=e*u+.5|0;a?(t=r&&d,n=p&&d!==u,s=(t?"<span class='"+r+"'>":"")+l.slice(0,d).join(o)+(t?"</span>":"")+(n?"<span class='"+p+"'>":"")+o+m.slice(d).join(o)+(n?"</span>":"")):s=l.slice(0,d).join(o)+o+m.slice(d).join(o),i.svg?g.textContent=s:g.innerHTML="&nbsp;"===f&&~s.indexOf("  ")?s.split("  ").join("&nbsp;&nbsp;"):s}};TextPlugin.splitInnerHTML=splitInnerHTML,TextPlugin.emojiSafeSplit=emojiSafeSplit,TextPlugin.getText=getText,_getGSAP()&&gsap.registerPlugin(TextPlugin);export{TextPlugin as default};