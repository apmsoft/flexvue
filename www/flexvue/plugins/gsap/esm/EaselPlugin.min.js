var gsap,_coreInitted,_win,_createJS,_ColorFilter,_ColorMatrixFilter,_colorProps="redMultiplier,greenMultiplier,blueMultiplier,alphaMultiplier,redOffset,greenOffset,blueOffset,alphaOffset".split(","),_windowExists=function(){return"undefined"!=typeof window},_getGSAP=function(){return gsap||_windowExists()&&(gsap=window.gsap)&&gsap.registerPlugin&&gsap},_getCreateJS=function(){return _createJS||_win&&_win.createjs||_win||{}},_warn=function(e){return console.warn(e)},_cache=function(e){var t=e.getBounds&&e.getBounds();t||(t=e.nominalBounds||{x:0,y:0,width:100,height:100},e.setBounds&&e.setBounds(t.x,t.y,t.width,t.height)),e.cache&&e.cache(t.x,t.y,t.width,t.height),_warn("EaselPlugin: for filters to display in EaselJS, you must call the object's cache() method first. GSAP attempted to use the target's getBounds() for the cache but that may not be completely accurate. "+e)},_parseColorFilter=function(e,t,r){_ColorFilter||(_ColorFilter=_getCreateJS().ColorFilter,_ColorFilter||_warn("EaselPlugin error: The EaselJS ColorFilter JavaScript file wasn't loaded."));for(var l,i,o,a,n,u,s=e.filters||[],_=s.length;_--;)if(s[_]instanceof _ColorFilter){i=s[_];break}if(i||(i=new _ColorFilter,s.push(i),e.filters=s),o=i.clone(),null!=t.tint)l=gsap.utils.splitColor(t.tint),a=null!=t.tintAmount?+t.tintAmount:1,o.redOffset=+l[0]*a,o.greenOffset=+l[1]*a,o.blueOffset=+l[2]*a,o.redMultiplier=o.greenMultiplier=o.blueMultiplier=1-a;else for(n in t)"exposure"!==n&&"brightness"!==n&&(o[n]=+t[n]);for(null!=t.exposure?(o.redOffset=o.greenOffset=o.blueOffset=255*(+t.exposure-1),o.redMultiplier=o.greenMultiplier=o.blueMultiplier=1):null!=t.brightness&&(a=+t.brightness-1,o.redOffset=o.greenOffset=o.blueOffset=a>0?255*a:0,o.redMultiplier=o.greenMultiplier=o.blueMultiplier=1-Math.abs(a)),_=8;_--;)n=_colorProps[_],i[n]!==o[n]&&(u=r.add(i,n,i[n],o[n]),u&&(u.op="easel_colorFilter"));r._props.push("easel_colorFilter"),e.cacheID||_cache(e)},_idMatrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],_lumR=.212671,_lumG=.71516,_lumB=.072169,_applyMatrix=function(e,t){if(!(e instanceof Array&&t instanceof Array))return t;var r,l,i=[],o=0,a=0;for(r=0;r<4;r++){for(l=0;l<5;l++)a=4===l?e[o+4]:0,i[o+l]=e[o]*t[l]+e[o+1]*t[l+5]+e[o+2]*t[l+10]+e[o+3]*t[l+15]+a;o+=5}return i},_setSaturation=function(e,t){if(isNaN(t))return e;var r=1-t,l=r*_lumR,i=r*_lumG,o=r*_lumB;return _applyMatrix([l+t,i,o,0,0,l,i+t,o,0,0,l,i,o+t,0,0,0,0,0,1,0],e)},_colorize=function(e,t,r){isNaN(r)&&(r=1);var l=gsap.utils.splitColor(t),i=l[0]/255,o=l[1]/255,a=l[2]/255,n=1-r;return _applyMatrix([n+r*i*_lumR,r*i*_lumG,r*i*_lumB,0,0,r*o*_lumR,n+r*o*_lumG,r*o*_lumB,0,0,r*a*_lumR,r*a*_lumG,n+r*a*_lumB,0,0,0,0,0,1,0],e)},_setHue=function(e,t){if(isNaN(t))return e;t*=Math.PI/180;var r=Math.cos(t),l=Math.sin(t);return _applyMatrix([_lumR+r*(1-_lumR)+l*-_lumR,_lumG+r*-_lumG+l*-_lumG,_lumB+r*-_lumB+l*(1-_lumB),0,0,_lumR+r*-_lumR+.143*l,_lumG+r*(1-_lumG)+.14*l,_lumB+r*-_lumB+-.283*l,0,0,_lumR+r*-_lumR+l*-(1-_lumR),_lumG+r*-_lumG+l*_lumG,_lumB+r*(1-_lumB)+l*_lumB,0,0,0,0,0,1,0,0,0,0,0,1],e)},_setContrast=function(e,t){return isNaN(t)?e:(t+=.01,_applyMatrix([t,0,0,0,128*(1-t),0,t,0,0,128*(1-t),0,0,t,0,128*(1-t),0,0,0,1,0],e))},_parseColorMatrixFilter=function(e,t,r){_ColorMatrixFilter||(_ColorMatrixFilter=_getCreateJS().ColorMatrixFilter,_ColorMatrixFilter||_warn("EaselPlugin: The EaselJS ColorMatrixFilter JavaScript file wasn't loaded."));for(var l,i,o,a,n=e.filters||[],u=n.length;--u>-1;)if(n[u]instanceof _ColorMatrixFilter){o=n[u];break}for(o||(o=new _ColorMatrixFilter(_idMatrix.slice()),n.push(o),e.filters=n),i=o.matrix,l=_idMatrix.slice(),null!=t.colorize&&(l=_colorize(l,t.colorize,Number(t.colorizeAmount))),null!=t.contrast&&(l=_setContrast(l,Number(t.contrast))),null!=t.hue&&(l=_setHue(l,Number(t.hue))),null!=t.saturation&&(l=_setSaturation(l,Number(t.saturation))),u=l.length;--u>-1;)l[u]!==i[u]&&(a=r.add(i,u,i[u],l[u]),a&&(a.op="easel_colorMatrixFilter"));r._props.push("easel_colorMatrixFilter"),e.cacheID||_cache(),r._matrix=i},_initCore=function(e){gsap=e||_getGSAP(),_windowExists()&&(_win=window),gsap&&(_coreInitted=1)};export var EaselPlugin={version:"3.8.0",name:"easel",init:function(e,t,r,l,i){var o,a,n,u,s,_,c;for(o in _coreInitted||(_initCore(),gsap||_warn("Please gsap.registerPlugin(EaselPlugin)")),this.target=e,t)if(s=t[o],"colorFilter"===o||"tint"===o||"tintAmount"===o||"exposure"===o||"brightness"===o)n||(_parseColorFilter(e,t.colorFilter||t,this),n=!0);else if("saturation"===o||"contrast"===o||"hue"===o||"colorize"===o||"colorizeAmount"===o)u||(_parseColorMatrixFilter(e,t.colorMatrixFilter||t,this),u=!0);else if("frame"===o){if("string"==typeof s&&"="!==s.charAt(1)&&(_=e.labels))for(c=0;c<_.length;c++)_[c].label===s&&(s=_[c].position);a=this.add(e,"gotoAndStop",e.currentFrame,s,l,i,Math.round),a&&(a.op=o)}else null!=e[o]&&this.add(e,o,"get",s)},render:function(e,t){for(var r=t._pt;r;)r.r(e,r.d),r=r._next;t.target.cacheID&&t.target.updateCache()},register:_initCore};EaselPlugin.registerCreateJS=function(e){_createJS=e},_getGSAP()&&gsap.registerPlugin(EaselPlugin);export{EaselPlugin as default};