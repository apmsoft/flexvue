var gsap,_win,_splitColor,_coreInitted,_PIXI,PropTween,_getSetter,_isV4,i,p,_windowExists=function(){return"undefined"!=typeof window},_getGSAP=function(){return gsap||_windowExists()&&(gsap=window.gsap)&&gsap.registerPlugin&&gsap},_isFunction=function(t){return"function"==typeof t},_warn=function(t){return console.warn(t)},_idMatrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],_lumR=.212671,_lumG=.71516,_lumB=.072169,_applyMatrix=function(t,r){var e,i,o=[],n=0,l=0;for(e=0;e<4;e++){for(i=0;i<5;i++)l=4===i?t[n+4]:0,o[n+i]=t[n]*r[i]+t[n+1]*r[i+5]+t[n+2]*r[i+10]+t[n+3]*r[i+15]+l;n+=5}return o},_setSaturation=function(t,r){var e=1-r,i=e*_lumR,o=e*_lumG,n=e*_lumB;return _applyMatrix([i+r,o,n,0,0,i,o+r,n,0,0,i,o,n+r,0,0,0,0,0,1,0],t)},_colorize=function(t,r,e){var i=_splitColor(r),o=i[0]/255,n=i[1]/255,l=i[2]/255,a=1-e;return _applyMatrix([a+e*o*_lumR,e*o*_lumG,e*o*_lumB,0,0,e*n*_lumR,a+e*n*_lumG,e*n*_lumB,0,0,e*l*_lumR,e*l*_lumG,a+e*l*_lumB,0,0,0,0,0,1,0],t)},_setHue=function(t,r){r*=Math.PI/180;var e=Math.cos(r),i=Math.sin(r);return _applyMatrix([_lumR+e*(1-_lumR)+i*-_lumR,_lumG+e*-_lumG+i*-_lumG,_lumB+e*-_lumB+i*(1-_lumB),0,0,_lumR+e*-_lumR+.143*i,_lumG+e*(1-_lumG)+.14*i,_lumB+e*-_lumB+-.283*i,0,0,_lumR+e*-_lumR+i*-(1-_lumR),_lumG+e*-_lumG+i*_lumG,_lumB+e*(1-_lumB)+i*_lumB,0,0,0,0,0,1,0,0,0,0,0,1],t)},_setContrast=function(t,r){return _applyMatrix([r,0,0,0,.5*(1-r),0,r,0,0,.5*(1-r),0,0,r,0,.5*(1-r),0,0,0,1,0],t)},_getFilter=function(t,r){var e,i=_PIXI.filters[r],o=t.filters||[],n=o.length;for(i||_warn(r+" not found. PixiPlugin.registerPIXI(PIXI)");--n>-1;)if(o[n]instanceof i)return o[n];return e=new i,"BlurFilter"===r&&(e.blur=0),o.push(e),t.filters=o,e},_addColorMatrixFilterCacheTween=function(t,r,e,i){r.add(e,t,e[t],i[t]),r._props.push(t)},_applyBrightnessToMatrix=function(t,r){var e=new _PIXI.filters.ColorMatrixFilter;return e.matrix=r,e.brightness(t,!0),e.matrix},_copy=function(t){var r,e={};for(r in t)e[r]=t[r];return e},_CMFdefaults={contrast:1,saturation:1,colorizeAmount:0,colorize:"rgb(255,255,255)",hue:0,brightness:1},_parseColorMatrixFilter=function(t,r,e){var i,o,n,l=_getFilter(t,"ColorMatrixFilter"),a=t._gsColorMatrixFilter=t._gsColorMatrixFilter||_copy(_CMFdefaults),s=r.combineCMF&&!("colorMatrixFilter"in r&&!r.colorMatrixFilter);n=l.matrix,r.resolution&&(l.resolution=r.resolution),r.matrix&&r.matrix.length===n.length?(o=r.matrix,1!==a.contrast&&_addColorMatrixFilterCacheTween("contrast",e,a,_CMFdefaults),a.hue&&_addColorMatrixFilterCacheTween("hue",e,a,_CMFdefaults),1!==a.brightness&&_addColorMatrixFilterCacheTween("brightness",e,a,_CMFdefaults),a.colorizeAmount&&(_addColorMatrixFilterCacheTween("colorize",e,a,_CMFdefaults),_addColorMatrixFilterCacheTween("colorizeAmount",e,a,_CMFdefaults)),1!==a.saturation&&_addColorMatrixFilterCacheTween("saturation",e,a,_CMFdefaults)):(o=_idMatrix.slice(),null!=r.contrast?(o=_setContrast(o,+r.contrast),_addColorMatrixFilterCacheTween("contrast",e,a,r)):1!==a.contrast&&(s?o=_setContrast(o,a.contrast):_addColorMatrixFilterCacheTween("contrast",e,a,_CMFdefaults)),null!=r.hue?(o=_setHue(o,+r.hue),_addColorMatrixFilterCacheTween("hue",e,a,r)):a.hue&&(s?o=_setHue(o,a.hue):_addColorMatrixFilterCacheTween("hue",e,a,_CMFdefaults)),null!=r.brightness?(o=_applyBrightnessToMatrix(+r.brightness,o),_addColorMatrixFilterCacheTween("brightness",e,a,r)):1!==a.brightness&&(s?o=_applyBrightnessToMatrix(a.brightness,o):_addColorMatrixFilterCacheTween("brightness",e,a,_CMFdefaults)),null!=r.colorize?(r.colorizeAmount="colorizeAmount"in r?+r.colorizeAmount:1,o=_colorize(o,r.colorize,r.colorizeAmount),_addColorMatrixFilterCacheTween("colorize",e,a,r),_addColorMatrixFilterCacheTween("colorizeAmount",e,a,r)):a.colorizeAmount&&(s?o=_colorize(o,a.colorize,a.colorizeAmount):(_addColorMatrixFilterCacheTween("colorize",e,a,_CMFdefaults),_addColorMatrixFilterCacheTween("colorizeAmount",e,a,_CMFdefaults))),null!=r.saturation?(o=_setSaturation(o,+r.saturation),_addColorMatrixFilterCacheTween("saturation",e,a,r)):1!==a.saturation&&(s?o=_setSaturation(o,a.saturation):_addColorMatrixFilterCacheTween("saturation",e,a,_CMFdefaults))),i=o.length;for(;--i>-1;)o[i]!==n[i]&&e.add(n,i,n[i],o[i],"colorMatrixFilter");e._props.push("colorMatrixFilter")},_renderColor=function(t,r){var e=r.t,i=r.p,o=r.color,n=r.set;n(e,i,o[0]<<16|o[1]<<8|o[2])},_renderDirtyCache=function(t,r){var e=r.g;e&&(e.dirty++,e.clearDirty++)},_renderAutoAlpha=function(t,r){r.t.visible=!!r.t.alpha},_addColorTween=function(t,r,e,i){var o=t[r],n=_splitColor(_isFunction(o)?t[r.indexOf("set")||!_isFunction(t["get"+r.substr(3)])?r:"get"+r.substr(3)]():o),l=_splitColor(e);i._pt=new PropTween(i._pt,t,r,0,0,_renderColor,{t:t,p:r,color:n,set:_getSetter(t,r)}),i.add(n,0,n[0],l[0]),i.add(n,1,n[1],l[1]),i.add(n,2,n[2],l[2])},_colorProps={tint:1,lineColor:1,fillColor:1},_xyContexts="position,scale,skew,pivot,anchor,tilePosition,tileScale".split(","),_contexts={x:"position",y:"position",tileX:"tilePosition",tileY:"tilePosition"},_colorMatrixFilterProps={colorMatrixFilter:1,saturation:1,contrast:1,hue:1,colorize:1,colorizeAmount:1,brightness:1,combineCMF:1},_DEG2RAD=Math.PI/180,_isString=function(t){return"string"==typeof t},_degreesToRadians=function(t){return _isString(t)&&"="===t.charAt(1)?t.substr(0,2)+parseFloat(t.substr(2))*_DEG2RAD:t*_DEG2RAD},_renderPropWithEnd=function(t,r){return r.set(r.t,r.p,1===t?r.e:Math.round(1e5*(r.s+r.c*t))/1e5,r)},_addRotationalPropTween=function(t,r,e,i,o,n){var l,a,s=360*(n?_DEG2RAD:1),_=_isString(o),u=_&&"="===o.charAt(1)?+(o.charAt(0)+"1"):0,c=parseFloat(u?o.substr(2):o)*(n?_DEG2RAD:1),d=u?c*u:c-i,p=i+d;return _&&(l=o.split("_")[1],"short"===l&&(d%=s,d!==d%(s/2)&&(d+=d<0?s:-s)),"cw"===l&&d<0?d=(d+1e10*s)%s-~~(d/s)*s:"ccw"===l&&d>0&&(d=(d-1e10*s)%s-~~(d/s)*s)),t._pt=a=new PropTween(t._pt,r,e,i,d,_renderPropWithEnd),a.e=p,a},_initCore=function(){_windowExists()&&(_win=window,gsap=_getGSAP(),_PIXI=_coreInitted=_PIXI||_win.PIXI,_isV4=_PIXI&&_PIXI.VERSION&&"4"===_PIXI.VERSION.charAt(0),_splitColor=function(t){return gsap.utils.splitColor("0x"===(t+"").substr(0,2)?"#"+t.substr(2):t)})};for(i=0;i<_xyContexts.length;i++)p=_xyContexts[i],_contexts[p+"X"]=p,_contexts[p+"Y"]=p;export var PixiPlugin={version:"3.8.0",name:"pixi",register:function(t,r,e){gsap=t,PropTween=e,_getSetter=r.getSetter,_initCore()},registerPIXI:function(t){_PIXI=t},init:function(t,r,e,i,o){if(_PIXI||_initCore(),!(_PIXI&&t instanceof _PIXI.DisplayObject))return console.warn(t,"is not a DisplayObject or PIXI was not found. PixiPlugin.registerPIXI(PIXI);"),!1;var n,l,a,s,_,u,c,d,p;for(u in r){if(n=_contexts[u],a=r[u],n)l=~u.charAt(u.length-1).toLowerCase().indexOf("x")?"x":"y",this.add(t[n],l,t[n][l],"skew"===n?_degreesToRadians(a):a);else if("scale"===u||"anchor"===u||"pivot"===u||"tileScale"===u)this.add(t[u],"x",t[u].x,a),this.add(t[u],"y",t[u].y,a);else if("rotation"===u||"angle"===u)_addRotationalPropTween(this,t,u,t[u],a,"rotation"===u);else if(_colorMatrixFilterProps[u])s||(_parseColorMatrixFilter(t,r.colorMatrixFilter||r,this),s=!0);else if("blur"===u||"blurX"===u||"blurY"===u||"blurPadding"===u){if(_=_getFilter(t,"BlurFilter"),this.add(_,u,_[u],a),0!==r.blurPadding)for(c=r.blurPadding||2*Math.max(_[u],a),d=t.filters.length;--d>-1;)t.filters[d].padding=Math.max(t.filters[d].padding,c)}else if(_colorProps[u])if(("lineColor"===u||"fillColor"===u)&&t instanceof _PIXI.Graphics)for(p=(t.geometry||t).graphicsData,this._pt=new PropTween(this._pt,t,u,0,0,_renderDirtyCache,{g:t.geometry||t}),d=p.length;--d>-1;)_addColorTween(_isV4?p[d]:p[d][u.substr(0,4)+"Style"],_isV4?u:"color",a,this);else _addColorTween(t,u,a,this);else"autoAlpha"===u?(this._pt=new PropTween(this._pt,t,"visible",0,0,_renderAutoAlpha),this.add(t,"alpha",t.alpha,a),this._props.push("alpha","visible")):"resolution"!==u&&this.add(t,u,"get",a);this._props.push(u)}}};_getGSAP()&&gsap.registerPlugin(PixiPlugin);export{PixiPlugin as default};