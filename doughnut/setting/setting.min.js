define(["jquery","underscore","backbone","lazyload"],function(s,e,r,o){var i={version:"1",init:function(){var s=this;app.parserResource("/layout/setting",function(r){e.extend(app.docs,r),s.doSetting()})},doSetting:function(){ProgressBar.show_progress();var r=app.docs.setting.doset,o=Panel.onStart(r),i=userinfo;e.extend(i,{cache:!1}),UrlUtil.pushUrlParams({mode:"setting"}),UrlUtil.pushState("doSetting","",app.service_root_dir+"?"+s.param(UrlUtil._url_params)),DocAsyncTask.doGetContents(r,i,{success:function(r,i){s(o.id+"_docs_contents").html(r).promise().done(function(){s(".show-rules").on("click",function(e){ProgressBar.show_progress(),e.preventDefault();var r=s(this).data("id"),o=app.docs.setting[r];Panel.onStart(o);UrlUtil.pushState(r,"",app.service_root_dir+"?"+s.param({mode:r})+"#"+r),DocAsyncTask.doGetContents(o,{},{success:function(s,e){ProgressBar.close_progress()}})}),s("#setting-profile_image").css("backgroundImage","url("+userinfo.profile_image+")"),s("#myprofile_image, #btn-profile-edit").on("click",function(){app.go_url("family.html")}),s("#btn-setting-notice").on("click",function(){require([app.assets+"/notice/notice.min.js"],function(s){s.init()})}),s("#btn-trading-history").on("click",function(){require([app.assets+"/graph/graph.min.js"],function(s){s.init(function(){s.doRun()})})}),s("#is_push").unbind("click"),s("#is_push").on("click",function(){ProgressBar.show_progress();var r="y";s(this).parent().hasClass("is-checked")?(s(this).parent().removeClass("is-checked"),s(this).attr("checked",!1),r="n",s("#is_push").val("n")):(s(this).parent().addClass("is-checked"),s(this).attr("checked",!0),s("#is_push").val("y"),r="y");var o=userinfo;e.extend(o,{cache:!1,is_push:r}),DocAsyncTask.doPostMessage(app.src+"/setting/is_push.regi",o,{success:function(s){ProgressBar.close_progress()},fail:function(s){ProgressBar.close_progress(),void 0!==window.android?isMobile.Android()&&window.android.showToast(s.msg,"short","center"):alert(s.msg)}})}),s("#mkt").unbind("click"),s("#mkt").on("click",function(){ProgressBar.show_progress();var r="y";s(this).parent().hasClass("is-checked")?(s(this).parent().removeClass("is-checked"),s(this).attr("checked",!1),r="n",s("#mkt").val("n")):(s(this).parent().addClass("is-checked"),s(this).attr("checked",!0),s("#mkt").val("y"),r="y");var o=userinfo;e.extend(o,{cache:!1,is_marketing:r}),DocAsyncTask.doPostMessage(app.src+"/setting/is_marketing.regi",o,{success:function(s){ProgressBar.close_progress()},fail:function(s){ProgressBar.close_progress(),void 0!==window.android?isMobile.Android()&&window.android.showToast(s.msg,"short","center"):alert(s.msg)}})}),ProgressBar.close_progress()})},fail:function(s){ProgressBar.close_progress(),void 0!==window.android?isMobile.Android()&&window.android.showToast(s.msg,"short","center"):alert(s.msg)}})}};return i});