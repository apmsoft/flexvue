define(["jquery","underscore","backbone","lazyload","DateFormat"],function(a,s,o,e,r){var i={is_loading:!1,init:function(a){app.parserResource("/layout/alarm",function(o){s.extend(app.docs,o),!s.isNull(a)&&s.isFunction(a)&&a()})},doListDialog:function(o,e){var r=this;if(!r.is_loading){var i=app.docs.alarm.list_dialog;Panel.onStart(i);UrlUtil.pushUrlParams({mode:"alarm_dialog"}),UrlUtil.pushState("alarm_dialog","",app.service_root_dir+"?"+a.param(UrlUtil._url_params));var n={cache:!1,page:s.isUndefined(o.page)?1:o.page,authtoken:userinfo.authtoken,userid:userinfo.userid};s.extend(n,o),r.is_loading=!0,ProgressBar.show_progress(),DocAsyncTask.doGetContents(i,n,{success:function(s,o){ProgressBar.close_progress(),a("#myModal_docs_contents").html(s).promise().done(function(){e(o)}),setTimeout(function(){r.is_loading=!1},300)},fail:function(a){r.is_loading=!1,ProgressBar.close_progress()}})}},doList:function(o,e){var r=this;if(!r.is_loading){var i=app.docs.alarm.list;Panel.onStart(i);UrlUtil.pushUrlParams({mode:"alarm_list"}),UrlUtil.pushState("alarm_list","",app.service_root_dir+"?"+a.param(UrlUtil._url_params));var n={cache:!1,page:s.isUndefined(o.page)?1:o.page,authtoken:userinfo.authtoken,userid:userinfo.userid};s.extend(n,o),r.is_loading=!0,ProgressBar.show_progress(),DocAsyncTask.doGetContents(i,n,{success:function(a,s){ProgressBar.close_progress(),e(a,s),setTimeout(function(){r.is_loading=!1},300)},fail:function(a){r.is_loading=!1,ProgressBar.close_progress()}})}},doUpdateRead:function(){var a={cache:!1,doc_id:"alarm/update",authtoken:userinfo.authtoken,userid:userinfo.userid};DocAsyncTask.doPostMessage(app.src+"/alarm/update_read",a,{success:function(a){},fail:function(a){app.log(a)}})}};return i});