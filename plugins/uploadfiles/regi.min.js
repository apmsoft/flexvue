define(["jquery","underscore","css!uploadfiles/jquery.uploadfile.css","jqueryform","uploadfiles/jquery.uploadfile.min"],function(e,l,i,a,n){var u=function(i,a,n,u){app.log("argv : "+i);var o=a,r=n,t=u,s=i[0],f=i[1],p=i[2],d=f.value;l.isNull(app.server_language)||""==app.server_language||(d+=app.server_language);var c={url:d,formData:{upfilename:"upfilename",doc_id:p.doc_id,token:p.token},dragDrop:p.dragdrop,fileName:"upfilename",maxFileCount:l.isUndefined(p.maxFileCount)?-1:p.maxFileCount,acceptFiles:l.isUndefined(p.acceptFiles)?"*":p.acceptFiles,returnType:"json",previewHeight:"40px",previewWidth:"40px",showFileCounter:!1,onLoad:function(e){!l.isNull(o)&&l.isFunction(o)&&o(e)},onSuccess:function(i,a,n){return"undefined"!=typeof a.result&&"false"==a.result?(alert(a.msg),void e(s).focus()):void(!l.isNull(r)&&l.isFunction(r)&&r(a))},showDelete:!0,deleteCallback:!0,deleteCallback:function(e,l){for(var i=e.length,a=0;a<i;a++){var n=(e[a].ofilename,e[a].file_type),u=e[a].fullname,o=e[a].sfilename;t({file_type:n,fullname:u,sfilename:o})}}};e(s).uploadFile(c)};return{initialize:u}});